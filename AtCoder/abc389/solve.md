## C

**题目大意**

给定一个队列，然后有以下操作：
- `1 l`：长度为 `l` 的蛇入队，蛇的身体占位置，且第一条蛇的头在位置 0。
- `2`：出队一条蛇
- `3 k `：询问当前队列中，第 k 条蛇的头的位置。

**解题思路**

我们不用真的去维护一个这样的队列。对于出队操作，我们只需要记录下出队了多少条蛇和出队的蛇的长度。对于所有的蛇，维护长度的前缀和，在询问时，还要额外考虑出队的情况。

## D

**题目大意**

网格里，以一个正方形小格子的中心为圆心，半径为 $R$ 画圆，问这个圆一共包含了多少个小格子。


**解题思路**

以圆心为原点建立坐标系。于是我们可以很容易看出在轴上的小格子一共有 $4(R - 1) +1$ 个，然后我们单独考虑第一象限有几个格子然后乘 4 加到答案里去就好了。

求第一象限所包含的小格子我们可以从小到大枚举纵坐标 $y$，去找最远地横坐标 $x$，需要满足 $(x + 0.5)^2 + (y + 0.5)^2 <= R^2$（通过对两边同时乘 4 可以避免计算小数）。而且观察到随  $y$ 的增大，最大的 $x$ 是递减的。于是就可以在线性的时间复杂度内解决这个问题。

## E

**题目大意**

有 $n$ 种商品，所有的商品都有无限个。购买了 $k$ 件商品 $i$ 的花费是 $k^2p_i$，现在给出预算，问最多能购买多少个商品。

**解题思路** 

对于已经买了 $k$ 件的商品 $i$，买下一件所需的花费是  $(k + 1)^2p_i - k^2p_i = (2k + 1)p_i$，实际上这可以看作是第 $k + 1$ 件商品的价格，换言之，第 $k$ 件商品 $i$ 的价格就是 $(2k - 1)p_i$

贪心地，我们的最优策略肯定是每次选价格最少的商品来购买，直到剩下的预算不够买下一件商品为止。通过这种测略，我们最后购买商品满足下面的条件：
- 存在一个价格上限 $x$，使得对于所有价格不超过 $x$ 的商品我们都购买了；剩下的预算我们无法选购完所有的价格为 $x + 1$ 的商品，只能尽可能多的选。

于是二分 $x$ 就好了。

## F

**题目大意**

依次有 $n$ 场比赛，第 $i$ 场比赛过后能加一分的条件是：
- 这场比赛的时候分数属于 $[l_i, r_i]$

给定若干初始分数，问所对应的最终的分数。

**解题思路**

首先有一点很重要的观察：
- 对于两个不同的初始分，在任何一场比赛后，初始分较小的一定不会超过初始分较大的。因为分数是一分一分的加的，当某场比赛后初始分较小的跟初始分较大的相同了后，两者就会共同变化而不会再出现超分的情况。

这也就是说，对于一个从小到大有序的初始分序列，在任何一场比赛后这个序列仍是有序的。所以每场比赛加分就要在序列上找到一段满足条件的并加一。

对区间的加一我们要实现区间修改，为了找区间端点我们要实现单点查询和二分查找。

树状数组能够满足。